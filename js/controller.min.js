function viewModel(){function e(){$("#query").click(function(){$(this).val("")}),$("#query").blur(function(){""==$(this).val()&&$(this).val("Example: Ninja Japanese Restaurant"),"Example: Ninja Japanese Restaurant"!=$(this).val()?$(this).addClass("focus"):$(this).removeClass("focus")}),$("#searchform").submit(function(e){e.preventDefault(),lat?t():navigator.geolocation.getCurrentPosition(n)})}function n(e){lat=e.coords.latitude,lng=e.coords.longitude,t()}function t(){$.ajax({type:"GET",url:"https://api.foursquare.com/v2/venues/explore?ll="+lat+","+lng+"&client_id=HFOT1XUCTPSBFCWA0W5OMCOLVPWLUA5T0ELRWKDOKAEVRB3V&client_secret=SJRCFDAGLCACDPY1EIEHNITKJIKNCN5KFPOINR0RCPYX35LZ&v=20130619&query="+$("#query").val(),success:function(e){$("#venues").show();var n=e.response.groups[0].items;$("#venues").html("");var t={zoom:11,center:new google.maps.LatLng(33.340053,-111.859627),mapTypeId:google.maps.MapTypeId.HYBRID,panControl:!0,zoomControl:!0},a=new google.maps.Map(document.getElementById("map"),t);$.each(n,function(){phone=this.venue.contact.formattedPhone?"Phone:"+this.venue.contact.formattedPhone:"",address=this.venue.location.address?'<p class="subinfo">'+this.venue.location.address+"<br>":"",this.venue.rating&&(rating='<span class="rating">'+this.venue.rating+"</span>"),appendeddatahtml='<div class="venue"><h2><span>'+this.venue.name+rating+"</span></h2>"+address+phone+"</p><p><strong>Total Checkins:</strong> "+this.venue.stats.checkinsCount+"</p></div>",$("#venues").append(appendeddatahtml);{var e={url:"images/ScopePin.png",scaledSize:new google.maps.Size(24,24),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(12,24)},n={map:a,position:new google.maps.LatLng(this.venue.location.lat,this.venue.location.lng),title:this.venue.name,animation:google.maps.Animation.DROP,icon:e,optimized:!1};new google.maps.Marker(n)}})}})}function a(){$("#venues").hide();{var e={zoom:11,center:new google.maps.LatLng(33.340053,-111.859627),mapTypeId:google.maps.MapTypeId.Hybrid,panControl:!0,zoomControl:!0,tilt:45};new google.maps.Map(document.getElementById("map"),e)}}this.map=ko.observable(),this.marker=ko.observable(),this.lat="",this.lng="",this.appendeddatahtml="",this.arguments="",this.str="",this.newstr="",this.phone="",this.rating="",this.address="",this.searchVenue=ko.observable(),e(),a()}ko.applyBindings(viewModel);